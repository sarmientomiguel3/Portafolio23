"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4457],{49372:function(e,n,t){t.d(n,{fY:function(){return c},yM:function(){return d},hN:function(){return g}});var r=t(1413),i=t(17592),o=t(17551),a=t(24631),s=t(46417),c=(0,i.ZP)((function(e){return(0,s.jsx)(a.Z,(0,r.Z)({select:!0,SelectProps:{native:!0}},e))}))((function(e){var n=e.theme;return{"& fieldset":{display:"none"},"& select":(0,r.Z)((0,r.Z)({},n.typography.subtitle2),{},{padding:n.spacing(.5,0,.5,1),paddingRight:"28px !important"}),"& .MuiOutlinedInput-root":{borderRadius:.75*Number(n.shape.borderRadius),backgroundColor:(0,o.Fq)(n.palette.grey[500],.08)}}})),l=t(4942),d=(0,i.ZP)(a.Z,{shouldForwardProp:function(e){return"width"!==e}})((function(e){var n=e.width,t=e.theme;return{"& fieldset":{display:"none"},"& .MuiOutlinedInput-root":{width:n,border:"solid 1px ".concat((0,o.Fq)(t.palette.grey[500],.32)),transition:t.transitions.create(["box-shadow","width"],{duration:t.transitions.duration.shorter}),"&.Mui-focused":(0,r.Z)({boxShadow:t.customShadows.z20},n&&(0,l.Z)({},t.breakpoints.up("sm"),{width:n+60}))}}})),u=t(45987),p=t(75192),x=t.n(p),h=t(47313),v=t(35898),f=t(47131),Z=t(8730),m=["quantity","onIncrease","onDecrease","disabledIncrease","disabledDecrease","sx"],j=(0,h.forwardRef)((function(e,n){var t=e.quantity,i=e.onIncrease,a=e.onDecrease,c=e.disabledIncrease,l=e.disabledDecrease,d=e.sx,p=(0,u.Z)(e,m);return(0,s.jsxs)(v.Z,(0,r.Z)((0,r.Z)({ref:n,flexShrink:0,direction:"row",alignItems:"center",justifyContent:"space-between",sx:(0,r.Z)({mb:.5,py:.5,px:.75,width:96,borderRadius:1,border:function(e){return"solid 1px ".concat((0,o.Fq)(e.palette.grey[500],.32))}},d)},p),{},{children:[(0,s.jsx)(f.Z,{size:"small",color:"inherit",onClick:a,disabled:l,sx:{color:"text.secondary"},children:(0,s.jsx)(Z.Z,{icon:"eva:minus-fill",width:16})}),t,(0,s.jsx)(f.Z,{size:"small",color:"inherit",onClick:i,disabled:c,sx:{color:"text.secondary"},children:(0,s.jsx)(Z.Z,{icon:"eva:plus-fill",width:16})})]}))}));j.propTypes={sx:x().object,onDecrease:x().func,onIncrease:x().func,quantity:x().number,disabledDecrease:x().bool,disabledIncrease:x().bool};var g=j},94457:function(e,n,t){t.r(n),t.d(n,{default:function(){return Zn}});var r=t(65964),i=t(74165),o=t(15861),a=t(47313),s=t(58467),c=t(70178),l=t(73428),d=t(35898),u=t(5239),p=t(84232),x=t(48175),h=t(50152),v=t(38875),f=t(29439),Z=t(1413),m=t(2135),j=t(17592),g=t(19860),y=t(47131),b=t(57829),w=t(46923),C=t(66281),k=t(63821),I=t(8730),S=t(53261),P=t(93433),R=t(45987),D=t(48310),T=t(15399),z=t(73149),M=t(5025),W=t(7781),N=t(93601),O=t(51166),F=t(49294),A=t(48883),B=t(34800),E=6e4,q=1440,G=30*q,U=365*q;function Y(e,n){return(0,B.Z)(1,arguments),function(e,n,t){var r,i,o;(0,B.Z)(2,arguments);var a=(0,z.j)(),s=null!==(r=null!==(i=null===t||void 0===t?void 0:t.locale)&&void 0!==i?i:a.locale)&&void 0!==r?r:A.Z;if(!s.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var c=(0,W.Z)(e,n);if(isNaN(c))throw new RangeError("Invalid time value");var l,d,u=(0,F.Z)((0,O.Z)(t),{addSuffix:Boolean(null===t||void 0===t?void 0:t.addSuffix),comparison:c});c>0?(l=(0,N.Z)(n),d=(0,N.Z)(e)):(l=(0,N.Z)(e),d=(0,N.Z)(n));var p,x=String(null!==(o=null===t||void 0===t?void 0:t.roundingMethod)&&void 0!==o?o:"round");if("floor"===x)p=Math.floor;else if("ceil"===x)p=Math.ceil;else{if("round"!==x)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");p=Math.round}var h,v=d.getTime()-l.getTime(),f=v/E,Z=(v-((0,M.Z)(d)-(0,M.Z)(l)))/E,m=null===t||void 0===t?void 0:t.unit;if("second"===(h=m?String(m):f<1?"second":f<60?"minute":f<q?"hour":Z<G?"day":Z<U?"month":"year")){var j=p(v/1e3);return s.formatDistance("xSeconds",j,u)}if("minute"===h){var g=p(f);return s.formatDistance("xMinutes",g,u)}if("hour"===h){var y=p(f/60);return s.formatDistance("xHours",y,u)}if("day"===h){var b=p(Z/q);return s.formatDistance("xDays",b,u)}if("month"===h){var w=p(Z/G);return 12===w&&"month"!==m?s.formatDistance("xYears",1,u):s.formatDistance("xMonths",w,u)}if("year"===h){var C=p(Z/U);return s.formatDistance("xYears",C,u)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}(e,Date.now(),n)}var L=t(89840),K=t(32600),H=t(84513),V=t(83213),_=t(61113),$=t(14913),J=t(35584),Q=t(46417),X="8864c717-587d-472a-929a-8e5f298024da-0";function ee(e){var n=e.conversation,t=e.openNav,r=e.isSelected,i=e.onSelect,o=ne(n,X),a=n.messages[n.messages.length-1].createdAt,s=o.otherParticipants.length>1,c=n.unreadCount>0,l=s&&o.otherParticipants.map((function(e){return e.status})).includes("online");return(0,Q.jsxs)(L.Z,{disableGutters:!0,onClick:i,sx:(0,Z.Z)({py:1.5,px:2.5},r&&{bgcolor:"action.selected"}),children:[(0,Q.jsx)(K.Z,{children:s?(0,Q.jsx)(H.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:l&&(0,Q.jsx)(J.Z,{status:"online"}),children:(0,Q.jsx)($._,{compact:!0,sx:{width:48,height:48},children:o.otherParticipants.slice(0,2).map((function(e){return(0,Q.jsx)($.z,{alt:e.name,src:e.avatar},e.id)}))})}):(0,Q.jsx)($.z,{alt:o.otherParticipants[0].name,src:o.otherParticipants[0].avatar,BadgeProps:{badgeContent:(0,Q.jsx)(J.Z,{status:o.otherParticipants[0].status})},sx:{width:48,height:48}},o.otherParticipants[0].id)}),t&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(V.Z,{primary:o.displayNames,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:o.displayText,secondaryTypographyProps:{noWrap:!0,variant:c?"subtitle2":"body2",color:c?"text.primary":"text.secondary"}}),(0,Q.jsxs)(d.Z,{alignItems:"flex-end",sx:{ml:2,height:44},children:[(0,Q.jsx)(_.Z,{noWrap:!0,variant:"body2",component:"span",sx:{mb:1.5,fontSize:12,color:"text.disabled"},children:Y(new Date(a),{addSuffix:!1})}),c&&(0,Q.jsx)(J.Z,{status:"unread",size:"small"})]})]})]})}var ne=function(e,n){var t=e.participants.filter((function(e){return e.id!==n})),r=t.map((function(e){return e.name})).join(", "),i="",o=e.messages[e.messages.length-1];if(o){var a=o.senderId===n?"You: ":"",s="image"===o.contentType?"Sent a photo":o.body;i="".concat(a).concat(s)}return{otherParticipants:t,displayNames:r,displayText:i}},te=["conversations","openNav","onCloseNav","selected","sx"],re="8864c717-587d-472a-929a-8e5f298024da-0";function ie(e){var n=e.conversations,t=e.openNav,r=e.onCloseNav,i=e.selected,o=e.sx,a=(0,R.Z)(e,te),c=(0,s.s0)(),l=(0,C.Z)("up","md"),d=!n.allIds.length;return(0,Q.jsx)(D.Z,(0,Z.Z)((0,Z.Z)({disablePadding:!0,sx:o},a),{},{children:(d?(0,P.Z)(Array(12)):n.allIds).map((function(e,o){return e?(0,Q.jsx)(ee,{openNav:t,conversation:n.byId[e],isSelected:i(e),onSelect:function(){l||r(),function(e){var t="",r=n.byId[e];if("GROUP"===r.type)t=r.id;else{var i=r.participants.find((function(e){return e.id!==re}));null!==i&&void 0!==i&&i.username&&(t=null===i||void 0===i?void 0:i.username)}c(x.vB.chat.view(t))}(e)}},e):(0,Q.jsx)(T.i4,{},o)}))}))}var oe=t(31685),ae=t(41727),se=t(49372);function ce(e){var n=e.value,t=e.onChange,r=e.onClickAway;return(0,Q.jsx)(oe.Z,{onClickAway:r,children:(0,Q.jsx)(se.yM,{fullWidth:!0,size:"small",value:n,onChange:t,placeholder:"Search contacts...",InputProps:{startAdornment:(0,Q.jsx)(ae.Z,{position:"start",children:(0,Q.jsx)(I.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})},sx:{mt:2.5}})})}var le=t(61689),de=t(19536),ue=t(51405),pe=t(88797),xe=t(12865),he=t(22608),ve=["online","invisible","away"];function fe(){var e=(0,xe.E)().user,n=(0,a.useState)("online"),t=(0,f.Z)(n,2),r=t[0],i=t[1],o=(0,a.useState)(null),s=(0,f.Z)(o,2),c=s[0],l=s[1];return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)($.z,{src:null===e||void 0===e?void 0:e.photoURL,alt:null===e||void 0===e?void 0:e.displayName,name:null===e||void 0===e?void 0:e.displayName,BadgeProps:{badgeContent:(0,Q.jsx)(J.Z,{status:r})},onClick:function(e){l(e.currentTarget)},sx:{cursor:"pointer",width:48,height:48}}),(0,Q.jsxs)(he.Z,{open:c,onClose:function(){l(null)},arrow:"top-left",sx:{p:0},children:[(0,Q.jsxs)(d.Z,{direction:"row",alignItems:"center",spacing:2,sx:{py:2,pr:1,pl:2.5},children:[(0,Q.jsxs)("div",{children:[(0,Q.jsx)(_.Z,{noWrap:!0,variant:"subtitle2",children:null===e||void 0===e?void 0:e.displayName}),(0,Q.jsx)(_.Z,{noWrap:!0,variant:"body2",sx:{color:"text.secondary"},children:null===e||void 0===e?void 0:e.email})]}),(0,Q.jsx)(le.Z,{title:"Log out",children:(0,Q.jsx)(y.Z,{color:"error",children:(0,Q.jsx)(I.Z,{icon:"ic:round-power-settings-new"})})})]}),(0,Q.jsx)(de.Z,{}),(0,Q.jsxs)(D.Z,{sx:{px:1},children:[(0,Q.jsxs)(ue.Z,{children:[(0,Q.jsx)(J.Z,{size:"large",status:r,sx:{m:.5,flexShrink:0}}),(0,Q.jsx)(pe.Z,{native:!0,fullWidth:!0,value:r,onChange:function(e){return i(e.target.value)},sx:{"& .MuiInputBase-input":{p:0,pl:2,typography:"body2",textTransform:"capitalize"},"& .MuiNativeSelect-icon":{right:-16,top:"unset"},"& .MuiOutlinedInput-notchedOutline":{display:"none"}},children:ve.map((function(e){return(0,Q.jsx)("option",{value:e,children:e},e)}))})]}),(0,Q.jsxs)(ue.Z,{children:[(0,Q.jsx)(I.Z,{icon:"ic:round-account-box"}),"Profile"]}),(0,Q.jsxs)(ue.Z,{children:[(0,Q.jsx)(I.Z,{icon:"eva:settings-2-fill"}),"Settings"]})]})]})]})}var Ze=t(63585),me=t(80216);function je(e){var n=e.searchContacts,t=e.searchResults,r=e.onSelectContact,i=!t.length&&!!n;return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(_.Z,{paragraph:!0,variant:"h6",sx:{px:2.5},children:"Contacts"}),i?(0,Q.jsx)(me.Z,{query:n,sx:{p:3,mx:"auto",width:"calc(100% - 40px)",bgcolor:"background.neutral"}}):(0,Q.jsx)(Q.Fragment,{children:t.map((function(e){return(0,Q.jsxs)(L.Z,{onClick:function(){return r(e)},sx:{px:2.5,py:1.5,typography:"subtitle2"},children:[(0,Q.jsx)(Ze.Z,{alt:e.name,src:e.avatar,sx:{mr:2}}),e.name]},e.id)}))})]})}var ge=(0,j.ZP)((function(e){return(0,Q.jsx)(y.Z,(0,Z.Z)({disableRipple:!0},e))}))((function(e){var n=e.theme;return{left:0,zIndex:9,width:32,height:32,position:"absolute",top:n.spacing(13),borderRadius:"0 12px 12px 0",color:n.palette.primary.contrastText,backgroundColor:n.palette.primary.main,boxShadow:n.customShadows.primary,"&:hover":{backgroundColor:n.palette.primary.darker}}})),ye=320,be=96;function we(e){var n=e.conversations,t=e.activeConversationId,r=(0,g.Z)(),c=(0,s.s0)(),l=(0,C.Z)("up","md"),u=(0,a.useState)(!1),p=(0,f.Z)(u,2),h=p[0],v=p[1],j=(0,a.useState)([]),P=(0,f.Z)(j,2),R=P[0],D=P[1],T=(0,a.useState)(""),z=(0,f.Z)(T,2),M=z[0],W=z[1],N=l&&!h;(0,a.useEffect)((function(){l?F():A()}),[l]);var O=function(){v(!h)},F=function(){v(!0)},A=function(){v(!1)},B=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=n.target.value,W(t),!t){e.next=10;break}return e.next=6,k.Z.get("/api/chat/search",{params:{query:t}});case 6:r=e.sent,D(r.data.results),e.next=11;break;case 10:D([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}(),E=(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(b.Z,{sx:{p:2.5},children:[(0,Q.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"center",children:[!N&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(fe,{}),(0,Q.jsx)(b.Z,{sx:{flexGrow:1}})]}),(0,Q.jsx)(y.Z,{onClick:O,children:(0,Q.jsx)(I.Z,{icon:h?"eva:arrow-ios-back-fill":"eva:arrow-ios-forward-fill"})}),!N&&(0,Q.jsx)(y.Z,{component:m.rU,to:x.vB.chat.new,children:(0,Q.jsx)(I.Z,{icon:"eva:edit-fill"})})]}),!N&&(0,Q.jsx)(ce,{value:M,onChange:B,onClickAway:function(){return W("")}})]}),(0,Q.jsx)(S.Z,{children:M?(0,Q.jsx)(je,{searchContacts:M,searchResults:R,onSelectContact:function(e){W(""),c(x.vB.chat.view(e.username))}}):(0,Q.jsx)(ie,{openNav:h,onCloseNav:A,conversations:n,selected:function(e){return t===e}})})]});return(0,Q.jsxs)(Q.Fragment,{children:[!l&&(0,Q.jsx)(ge,{onClick:O,children:(0,Q.jsx)(I.Z,{width:16,icon:"eva:people-fill"})}),l?(0,Q.jsx)(w.ZP,{open:h,variant:"persistent",PaperProps:{sx:(0,Z.Z)({pb:1,width:1,position:"static"},N&&{transform:"none !important",visibility:"visible !important"})},sx:(0,Z.Z)({width:ye,transition:r.transitions.create("width")},N&&{width:be}),children:E}):(0,Q.jsx)(w.ZP,{open:h,onClose:A,ModalProps:{keepMounted:!0},PaperProps:{sx:{pb:1,width:ye}},children:E})]})}var Ce=t(28845),ke=t.n(Ce),Ie=t(15122),Se=t.n(Ie),Pe=t(75868),Re=t(34345),De=t(24193),Te=["isCollapse","onCollapse","children","sx"];function ze(e){var n=e.isCollapse,t=e.onCollapse,r=e.children,i=e.sx,o=(0,R.Z)(e,Te);return(0,Q.jsx)(De.Z,(0,Z.Z)((0,Z.Z)({fullWidth:!0,color:"inherit",onClick:t,endIcon:(0,Q.jsx)(I.Z,{width:16,icon:n?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill"}),sx:(0,Z.Z)({height:40,flexShrink:0,borderRadius:0,typography:"overline",color:"text.disabled",justifyContent:"space-between",p:function(e){return e.spacing(1,1.5,1,2.5)}},i)},o),{},{children:r}))}function Me(e){var n=e.conversation,t=e.isCollapse,r=e.onCollapse,i=ke()(Se()(n.messages.map((function(e){return e.attachments}))));return(0,Q.jsxs)(d.Z,{flexGrow:1,sx:{pb:2,height:1,overflow:"hidden",borderTop:function(e){return"solid 1px ".concat(e.palette.divider)}},children:[(0,Q.jsxs)(ze,{isCollapse:t&&!!i.length,onCollapse:r,disabled:!i.length,sx:(0,Z.Z)({},!t&&{borderBottom:function(e){return"solid 1px ".concat(e.palette.divider)}}),children:["Attachments (",i.length,")"]}),(0,Q.jsx)(b.Z,{sx:{overflow:"hidden",height:t?1:0,transition:function(e){return e.transitions.create("height",{duration:e.transitions.duration.shorter})}},children:(0,Q.jsx)(S.Z,{children:i.map((function(e,n){return(0,Q.jsx)(We,{attachment:e},e.name+n)}))})})]})}function We(e){var n=e.attachment;return(0,Q.jsxs)(d.Z,{direction:"row",alignItems:"center",sx:{mt:2,px:2.5},children:[(0,Q.jsx)(d.Z,{alignItems:"center",justifyContent:"center",sx:{width:40,height:40,flexShrink:0,borderRadius:1,overflow:"hidden",position:"relative",backgroundColor:"background.neutral"},children:(0,Q.jsx)(Re.ZP,{imageView:!0,file:n.preview,onDownload:function(){return console.log("DOWNLOAD")},sx:{width:28,height:28}})}),(0,Q.jsxs)(d.Z,{flexGrow:1,sx:{ml:1.5,minWidth:0},children:[(0,Q.jsx)(_.Z,{variant:"body2",noWrap:!0,children:n.name}),(0,Q.jsx)(_.Z,{noWrap:!0,variant:"caption",sx:{color:"text.secondary",display:"block"},children:(0,Pe.zM)(n.dateCreated)})]})]})}var Ne=t(65033);function Oe(e){var n=e.participant,t=e.isCollapse,r=e.onCollapse;return n?(0,Q.jsxs)("div",{children:[(0,Q.jsxs)(d.Z,{alignItems:"center",sx:{py:4},children:[(0,Q.jsx)(Ze.Z,{alt:n.name,src:n.avatar,sx:{width:96,height:96,mb:2}}),(0,Q.jsx)(_.Z,{variant:"subtitle1",children:n.name}),(0,Q.jsx)(_.Z,{variant:"body2",sx:{color:"text.secondary",mt:.5},children:n.role})]}),(0,Q.jsx)(de.Z,{}),(0,Q.jsx)(ze,{isCollapse:t,onCollapse:r,children:"information"}),(0,Q.jsx)(Ne.Z,{in:t,children:(0,Q.jsx)(d.Z,{spacing:2,sx:{p:function(e){return e.spacing(2,2.5,2.5,2.5)}},children:[{icon:"eva:pin-fill",value:n.address},{icon:"eva:phone-fill",value:n.phone},{icon:"eva:email-fill",value:n.email}].map((function(e,n){return(0,Q.jsxs)(d.Z,{direction:"row",children:[(0,Q.jsx)(I.Z,{icon:e.icon,sx:{mr:1,mt:.5,flexShrink:0,color:"text.disabled"}}),(0,Q.jsx)(_.Z,{variant:"body2",noWrap:2===n,children:e.value})]},e.icon)}))})})]}):null}var Fe=t(94469),Ae=t(96467);function Be(e){var n=e.participant,t=e.open,r=e.onClose,i=n.name,o=n.avatar,a=n.role,s=n.address;return(0,Q.jsxs)(Fe.Z,{fullWidth:!0,maxWidth:"xs",open:t,onClose:r,children:[(0,Q.jsx)(y.Z,{onClick:r,sx:{position:"absolute",right:8,top:8},children:(0,Q.jsx)(I.Z,{icon:"eva:close-fill"})}),(0,Q.jsx)(Ae.Z,{sx:{p:5},children:(0,Q.jsxs)(d.Z,{direction:"row",spacing:3,children:[(0,Q.jsx)($.z,{alt:i,src:o,name:i,sx:{width:96,height:96}}),(0,Q.jsxs)(d.Z,{spacing:1,children:[(0,Q.jsx)(_.Z,{variant:"caption",sx:{color:"primary.main"},children:a}),(0,Q.jsx)(_.Z,{variant:"h6",children:i}),(0,Q.jsxs)(d.Z,{direction:"row",sx:{typography:"caption",color:"text.secondary"},children:[(0,Q.jsx)(I.Z,{icon:"eva:pin-fill",width:16,sx:{flexShrink:0,mr:.5}}),s]}),(0,Q.jsxs)(d.Z,{direction:"row",sx:{pt:1},children:[(0,Q.jsx)(y.Z,{color:"info",children:(0,Q.jsx)(I.Z,{icon:"eva:message-square-fill"})}),(0,Q.jsx)(y.Z,{color:"warning",children:(0,Q.jsx)(I.Z,{icon:"eva:email-fill"})}),(0,Q.jsx)(y.Z,{color:"success",children:(0,Q.jsx)(I.Z,{icon:"eva:phone-fill"})}),(0,Q.jsx)(y.Z,{color:"error",children:(0,Q.jsx)(I.Z,{icon:"eva:video-fill"})})]})]})]})})]})}var Ee=60;function qe(e){var n=e.participants,t=e.selectUserId,r=e.onOpenUserInfo,i=e.isCollapse,o=e.onCollapse;return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(ze,{isCollapse:i,onCollapse:o,children:["In room (",n.length,")"]}),(0,Q.jsx)(b.Z,{sx:{height:i?4*Ee:0,transition:function(e){return e.transitions.create("height",{duration:e.transitions.duration.shorter})}},children:(0,Q.jsx)(S.Z,{children:n.map((function(e){return(0,Q.jsx)(Ge,{participant:e,open:t===e.id,onOpen:function(){return r(e.id)},onClose:function(){return r(null)}},e.id)}))})})]})}function Ge(e){var n=e.participant,t=e.open,r=e.onClose,i=e.onOpen,o=n.name,a=n.avatar,s=n.status,c=n.role;return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(L.Z,{onClick:i,sx:{height:Ee,px:2.5},children:[(0,Q.jsx)(K.Z,{children:(0,Q.jsx)($.z,{alt:o,src:a,BadgeProps:{badgeContent:(0,Q.jsx)(J.Z,{status:s})}})}),(0,Q.jsx)(V.Z,{primary:o,secondary:c,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondaryTypographyProps:{noWrap:!0}})]}),(0,Q.jsx)(Be,{participant:n,open:t,onClose:r})]})}var Ue=(0,j.ZP)((function(e){return(0,Q.jsx)(y.Z,(0,Z.Z)({disableRipple:!0},e))}))((function(e){var n=e.theme;return{right:0,zIndex:9,width:32,height:32,position:"absolute",top:n.spacing(1),boxShadow:n.customShadows.z8,backgroundColor:n.palette.background.paper,border:"solid 1px ".concat(n.palette.divider),borderRight:0,borderRadius:"12px 0 0 12px",transition:n.transitions.create("all"),"&:hover":{backgroundColor:n.palette.background.neutral}}})),Ye=240;function Le(e){var n=e.conversation,t=e.participants,r=(0,g.Z)(),i=(0,C.Z)("up","lg"),o=(0,a.useState)(!0),s=(0,f.Z)(o,2),c=s[0],l=s[1],d=(0,a.useState)(!0),u=(0,f.Z)(d,2),p=u[0],x=u[1],h=(0,a.useState)(!0),v=(0,f.Z)(h,2),m=v[0],j=v[1],y=(0,a.useState)(!0),k=(0,f.Z)(y,2),S=k[0],P=k[1],R=(0,a.useState)(null),D=(0,f.Z)(R,2),T=D[0],z=D[1],M=function(){l(!1)},W=t.length>1;(0,a.useEffect)((function(){i?l(!0):M()}),[i]);var N=(0,Q.jsxs)(Q.Fragment,{children:[W?(0,Q.jsx)(qe,{selectUserId:T,participants:t,isCollapse:S,onCollapse:function(){return P(!S)},onOpenUserInfo:function(e){return z(e)}}):(0,Q.jsx)(Oe,{participant:t[0],isCollapse:p,onCollapse:function(){return x(!p)}}),(0,Q.jsx)(Me,{conversation:n,isCollapse:m,onCollapse:function(){return j(!m)}})]});return(0,Q.jsxs)(b.Z,{sx:{position:"relative"},children:[(0,Q.jsx)(Ue,{onClick:function(){return l(!c)},sx:(0,Z.Z)({},c&&i&&{right:Ye}),children:(0,Q.jsx)(I.Z,{width:16,icon:c?"eva:arrow-ios-forward-fill":"eva:arrow-ios-back-fill"})}),i?(0,Q.jsx)(w.ZP,{open:c,anchor:"right",variant:"persistent",PaperProps:{sx:{width:1,position:"static"}},sx:(0,Z.Z)({height:1,width:Ye,transition:r.transitions.create("width")},!c&&{width:0}),children:N}):(0,Q.jsx)(w.ZP,{anchor:"right",open:c,onClose:M,ModalProps:{keepMounted:!0},PaperProps:{sx:{width:Ye}},children:N})]})}var Ke=t(54882),He=t(46092),Ve=["disabled","conversationId","onSend","sx"],_e="8864c717-587d-472a-929a-8e5f298024da-0";function $e(e){var n=e.disabled,t=e.conversationId,r=e.onSend,i=e.sx,o=(0,R.Z)(e,Ve),s=(0,a.useRef)(null),c=(0,a.useState)(""),l=(0,f.Z)(c,2),u=l[0],p=l[1],x=function(){var e;null===(e=s.current)||void 0===e||e.click()};return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Ke.ZP,(0,Z.Z)({value:u,onKeyUp:function(e){"Enter"===e.key&&(console.log("Enter"),r&&u&&t&&r({conversationId:t,messageId:(0,He.Z)(),message:u,contentType:"text",attachments:[],createdAt:new Date,senderId:_e}),p(""))},onChange:function(e){return p(e.target.value)},placeholder:"Type a message",startAdornment:(0,Q.jsx)(ae.Z,{position:"start",children:(0,Q.jsx)(y.Z,{size:"small",children:(0,Q.jsx)(I.Z,{icon:"eva:smiling-face-fill"})})}),endAdornment:(0,Q.jsxs)(d.Z,{direction:"row",spacing:1,sx:{flexShrink:0,mr:1.5},children:[(0,Q.jsx)(y.Z,{disabled:n,size:"small",onClick:x,children:(0,Q.jsx)(I.Z,{icon:"ic:round-add-photo-alternate"})}),(0,Q.jsx)(y.Z,{disabled:n,size:"small",onClick:x,children:(0,Q.jsx)(I.Z,{icon:"eva:attach-2-fill"})}),(0,Q.jsx)(y.Z,{disabled:n,size:"small",children:(0,Q.jsx)(I.Z,{icon:"eva:mic-fill"})})]}),sx:(0,Z.Z)({pl:1,height:56,flexShrink:0,borderTop:function(e){return"solid 1px ".concat(e.palette.divider)}},i)},o)),(0,Q.jsx)("input",{type:"file",ref:s,style:{display:"none"}})]})}var Je=t(91512),Qe=t(59063),Xe="8864c717-587d-472a-929a-8e5f298024da-0";function en(e){var n=e.message,t=e.conversation,r=e.onOpenLightbox,i=t.participants.find((function(e){return e.id===n.senderId})),o=n.senderId===Xe?{type:"me"}:{avatar:null===i||void 0===i?void 0:i.avatar,name:null===i||void 0===i?void 0:i.name},a="me"===o.type,s="image"===n.contentType,c=o.name&&o.name.split(" ")[0];return(0,Q.jsxs)(d.Z,{direction:"row",justifyContent:a?"flex-end":"unset",sx:{mb:3},children:[!a&&(0,Q.jsx)(Ze.Z,{alt:o.name,src:o.avatar,sx:{width:32,height:32,mr:2}}),(0,Q.jsxs)(d.Z,{spacing:1,alignItems:"flex-end",children:[(0,Q.jsxs)(_.Z,{noWrap:!0,variant:"caption",sx:(0,Z.Z)({color:"text.disabled"},!a&&{mr:"auto"}),children:[!a&&"".concat(c,",")," \xa0",Y(new Date(n.createdAt),{addSuffix:!0})]}),(0,Q.jsx)(d.Z,{sx:(0,Z.Z)((0,Z.Z)({p:1.5,minWidth:48,maxWidth:320,borderRadius:1,overflow:"hidden",typography:"body2",bgcolor:"background.neutral"},a&&{color:"grey.800",bgcolor:"primary.lighter"}),s&&{p:0}),children:s?(0,Q.jsx)(Qe.Z,{alt:"attachment",src:n.body,onClick:function(){return r(n.body)},sx:{cursor:"pointer","&:hover":{opacity:.9}}}):n.body})]})]})}function nn(e){var n=e.conversation,t=(0,a.useRef)(null),r=(0,a.useState)(-1),i=(0,f.Z)(r,2),o=i[0],s=i[1];(0,a.useEffect)((function(){t.current&&(t.current.scrollTop=t.current.scrollHeight)}),[n.messages]);var c=n.messages.filter((function(e){return"image"===e.contentType})).map((function(e){return{src:e.body}}));return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(S.Z,{scrollableNodeProps:{ref:t},sx:{p:3,height:1},children:n.messages.map((function(e){return(0,Q.jsx)(en,{message:e,conversation:n,onOpenLightbox:function(){return function(e){var n=c.findIndex((function(n){return n.src===e}));s(n)}(e.body)}},e.id)}))}),(0,Q.jsx)(Je.Z,{index:o,slides:c,open:o>=0,close:function(){s(-1)}})]})}var tn=t(90891);function rn(e){var n=e.participants,t=n.length>1,r=n.length?n[0]:null;return(0,Q.jsxs)(d.Z,{direction:"row",alignItems:"center",sx:{p:function(e){return e.spacing(2,1,2,2)}},children:[t?(0,Q.jsxs)(d.Z,{flexGrow:1,children:[(0,Q.jsx)($._,{max:3,children:n.map((function(e){return(0,Q.jsx)($.z,{alt:e.name,src:e.avatar},e.id)}))}),(0,Q.jsxs)(tn.Z,{variant:"body2",sx:{mt:.5,alignItems:"center",display:"inline-flex",color:"text.secondary"},children:[n.length," persons",(0,Q.jsx)(I.Z,{icon:"eva:arrow-ios-forward-fill",width:16})]})]}):(0,Q.jsxs)(d.Z,{flexGrow:1,direction:"row",alignItems:"center",spacing:2,children:[(0,Q.jsx)($.z,{src:null===r||void 0===r?void 0:r.avatar,alt:null===r||void 0===r?void 0:r.name,BadgeProps:{badgeContent:(0,Q.jsx)(J.Z,{status:null===r||void 0===r?void 0:r.status})}}),(0,Q.jsxs)("div",{children:[(0,Q.jsx)(_.Z,{variant:"subtitle2",children:null===r||void 0===r?void 0:r.name}),(0,Q.jsx)(_.Z,{variant:"body2",sx:{color:"text.secondary"},children:"offline"===(null===r||void 0===r?void 0:r.status)?(null===r||void 0===r?void 0:r.lastActivity)&&(0,Pe.DY)(null===r||void 0===r?void 0:r.lastActivity):(0,Q.jsx)(b.Z,{component:"span",sx:{textTransform:"capitalize"},children:null===r||void 0===r?void 0:r.status})})]})]}),(0,Q.jsx)(y.Z,{children:(0,Q.jsx)(I.Z,{icon:"eva:phone-fill"})}),(0,Q.jsx)(y.Z,{children:(0,Q.jsx)(I.Z,{icon:"eva:video-fill"})}),(0,Q.jsx)(y.Z,{children:(0,Q.jsx)(I.Z,{icon:"eva:more-vertical-fill"})})]})}var on=t(83870),an=t.n(on),sn=t(46642),cn=t.n(sn),ln=t(17551),dn=t(19065),un=t(24631),pn=t(66212),xn=["contacts","recipients","onAddRecipients","sx"];function hn(e){var n=e.contacts,t=e.recipients,r=e.onAddRecipients,i=e.sx,o=(0,R.Z)(e,xn),s=(0,a.useState)(""),c=(0,f.Z)(s,2),l=c[0],u=c[1];return(0,Q.jsxs)(d.Z,(0,Z.Z)((0,Z.Z)({spacing:1,direction:"row",alignItems:"center",sx:(0,Z.Z)({py:2,px:2.5},i)},o),{},{children:[(0,Q.jsx)(_.Z,{variant:"subtitle2",sx:{color:"text.secondary"},children:"To:"}),(0,Q.jsx)(dn.Z,{sx:{minWidth:240},multiple:!0,popupIcon:null,noOptionsText:(0,Q.jsx)(me.Z,{query:l}),onChange:function(e,n){return t=n,u(""),void r(t);var t},onInputChange:function(e,n){return u(n)},options:n,getOptionLabel:function(e){return e.name},renderInput:function(e){return(0,Q.jsx)(un.Z,(0,Z.Z)((0,Z.Z)({},e),{},{size:"small",placeholder:t.length?"+Recipients":""}))},renderOption:function(e,n,t){var r=t.inputValue,i=t.selected,o=n.name,a=n.avatar,s=cn()(o,r),c=an()(o,s);return(0,Q.jsxs)(b.Z,(0,Z.Z)((0,Z.Z)({component:"li",sx:{p:"12px !important"}},e),{},{children:[(0,Q.jsxs)(b.Z,{sx:{mr:1.5,width:32,height:32,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[(0,Q.jsx)(Ze.Z,{alt:o,src:a}),(0,Q.jsx)(b.Z,{sx:(0,Z.Z)({top:0,opacity:0,width:"100%",height:"100%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",bgcolor:function(e){return(0,ln.Fq)(e.palette.grey[900],.8)},transition:function(e){return e.transitions.create("opacity",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.shorter})}},i&&{opacity:1,color:"primary.main"}),children:(0,Q.jsx)(I.Z,{icon:"eva:checkmark-fill"})})]}),c.map((function(e,n){return(0,Q.jsx)(_.Z,{variant:"subtitle2",color:e.highlight?"primary":"textPrimary",children:e.text},n)}))]}))},renderTags:function(e,n){return e.map((function(e,t){return(0,a.createElement)(pn.Z,(0,Z.Z)((0,Z.Z)({},n({index:t})),{},{key:e.id,size:"small",label:e.name,avatar:(0,Q.jsx)(Ze.Z,{alt:e.name,src:e.avatar})}))}))}})]}))}var vn="8864c717-587d-472a-929a-8e5f298024da-0";function fn(){var e=(0,h.K$)().themeStretch,n=(0,u.I0)(),t=(0,s.s0)(),r=(0,s.TH)().pathname,f=(0,s.UO)().conversationKey,Z=void 0===f?"":f,m=(0,u.v9)((function(e){return e.chat})),j=m.contacts,g=m.recipients,y=m.participants,b=m.activeConversationId,w=m.conversations,C=(0,u.v9)((function(){return b?w.byId[b]:{id:"",messages:[],participants:[],unreadCount:0,type:""}})),k=!!Z,I=y.filter((function(e){return e.id!==vn}));(0,a.useEffect)((function(){n((0,p.uv)()),n((0,p.K2)())}),[n]),(0,a.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n((0,p.aS)("".concat(Z))),e.prev=1,e.next=4,n((0,p.cc)("".concat(Z)));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),t(x.vB.chat.new);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();Z?e():b&&n((0,p.PY)())}),[Z]),(0,a.useEffect)((function(){b&&n((0,p.R7)(b))}),[n,b]);var S=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n((0,p.bG)(t))}catch(r){console.error(r)}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,Q.jsxs)(c.Z,{maxWidth:!e&&"xl",children:[(0,Q.jsx)(v.Z,{heading:"Chat",links:[{name:"Dashboard",href:x.vB.root},{name:"Chat"}]}),(0,Q.jsxs)(l.Z,{sx:{height:"72vh",display:"flex"},children:[(0,Q.jsx)(we,{conversations:w,activeConversationId:b}),(0,Q.jsxs)(d.Z,{flexGrow:1,sx:{overflow:"hidden"},children:[k?(0,Q.jsx)(rn,{participants:I}):(0,Q.jsx)(hn,{recipients:g,contacts:Object.values(j.byId),onAddRecipients:function(e){n((0,p.sS)(e))}}),(0,Q.jsxs)(d.Z,{direction:"row",flexGrow:1,sx:{overflow:"hidden",borderTop:function(e){return"solid 1px ".concat(e.palette.divider)}},children:[(0,Q.jsxs)(d.Z,{flexGrow:1,sx:{minWidth:0},children:[(0,Q.jsx)(nn,{conversation:C}),(0,Q.jsx)($e,{conversationId:b,onSend:S,disabled:r===x.vB.chat.root||r===x.vB.chat.new})]}),k&&(0,Q.jsx)(Le,{conversation:C,participants:I})]})]})]})]})}function Zn(){return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(r.ql,{children:(0,Q.jsx)("title",{children:" Chat | Minimal UI"})}),(0,Q.jsx)(fn,{})]})}},96467:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(4942),i=t(63366),o=t(87462),a=t(47313),s=t(83061),c=t(21921),l=t(17592),d=t(77342),u=t(77430),p=t(32298);function x(e){return(0,p.Z)("MuiDialogContent",e)}(0,u.Z)("MuiDialogContent",["root","dividers"]);var h=t(93174),v=t(46417),f=["className","dividers"],Z=(0,l.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.dividers&&n.dividers]}})((function(e){var n=e.theme,t=e.ownerState;return(0,o.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((n.vars||n).palette.divider),borderBottom:"1px solid ".concat((n.vars||n).palette.divider)}:(0,r.Z)({},".".concat(h.Z.root," + &"),{paddingTop:0}))})),m=a.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiDialogContent"}),r=t.className,a=t.dividers,l=void 0!==a&&a,u=(0,i.Z)(t,f),p=(0,o.Z)({},t,{dividers:l}),h=function(e){var n=e.classes,t={root:["root",e.dividers&&"dividers"]};return(0,c.Z)(t,x,n)}(p);return(0,v.jsx)(Z,(0,o.Z)({className:(0,s.Z)(h.root,r),ownerState:p,ref:n},u))}))},93174:function(e,n,t){t.d(n,{a:function(){return o}});var r=t(77430),i=t(32298);function o(e){return(0,i.Z)("MuiDialogTitle",e)}var a=(0,r.Z)("MuiDialogTitle",["root"]);n.Z=a}}]);